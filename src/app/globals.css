@import "tailwindcss";
@import "@heroui/styles";
@import "leaflet/dist/leaflet.css";

:root {
  --background: #ffffff; /* 纯白底色 */
  --foreground: #111111;

  /* 搜索组件焦点样式 */
  --search-focus-ring: 0 0 0 2px rgba(59, 130, 246, 0.2);
  --search-focus-border: #3b82f6;
  --search-focus-ring-dark: 0 0 0 2px rgba(96, 165, 250, 0.2);
  --search-focus-border-dark: #60a5fa;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    /* iOS-style深色背景 */
    --background: #1c1c1e;
    --foreground: #f4f4f5;
  }
}

/* Support .dark class for manual theme switching */
html.dark {
  --background: #1c1c1e;
  --foreground: #f4f4f5;
}

body {
  margin: 0;
  background-color: #ffffff;
  color: var(--foreground);
  font-family:
    var(--font-sans),
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    sans-serif;
}

html.dark body {
  background-color: #1c1c1e;
  color: #f4f4f5;
}

a {
  color: inherit;
  text-decoration: none;
}

/* Visible focus indicators for accessibility */
*:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
  border-radius: 2px;
}

@media (prefers-color-scheme: dark) {
  *:focus-visible {
    outline-color: #60a5fa;
  }
}

/* Ensure buttons and interactive elements have visible focus */
button:focus-visible,
a:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

.search-focus-reset:focus,
.search-focus-reset:focus-visible {
  outline: none !important;
  outline-offset: 0 !important;
  box-shadow: none !important;
}

/* Screen reader only class */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only.focus\:not-sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  padding: initial;
  margin: initial;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* ----------------------------------------
   iOS 风格深色覆盖（Tailwind dark 类）
   让常见的 dark:bg-* 和 dark:border/ring-* 更柔和
----------------------------------------- */
:root {
  --ios-bg: #1c1c1e; /* System background */
  --ios-elev-1: #2c2c2e; /* Secondary background / separators */
  --ios-elev-2: #3a3a3c; /* Tertiary background */
  --ios-label: #f2f2f7; /* Primary text */
  --ios-secondary-label: #d1d1d6; /* Secondary text */
  --ios-tertiary-label: #8e8e93; /* Tertiary text */
}

.dark .dark\:bg-zinc-950 {
  background-color: var(--ios-bg) !important;
}
.dark .dark\:bg-zinc-900 {
  background-color: var(--ios-bg) !important;
}
.dark .dark\:bg-zinc-900\/40 {
  background-color: rgba(28, 28, 30, 0.4) !important;
}
.dark .dark\:bg-zinc-900\/60 {
  background-color: rgba(28, 28, 30, 0.6) !important;
}
.dark .dark\:bg-zinc-900\/70 {
  background-color: rgba(28, 28, 30, 0.7) !important;
}
.dark .dark\:bg-zinc-900\/80 {
  background-color: rgba(28, 28, 30, 0.8) !important;
}
.dark .dark\:border-zinc-800 {
  border-color: var(--ios-elev-1) !important;
}
.dark .dark\:ring-zinc-800 {
  --tw-ring-color: var(--ios-elev-1) !important;
}

/* Fallback mappings to make more of the UI dark by default */
.dark .bg-white {
  background-color: var(--ios-elev-1) !important;
}
.dark .bg-white\/90 {
  background-color: rgba(44, 44, 46, 0.9) !important;
}
.dark .bg-white\/80 {
  background-color: rgba(44, 44, 46, 0.8) !important;
}
.dark .bg-white\/70 {
  background-color: rgba(44, 44, 46, 0.7) !important;
}
.dark .bg-white\/60 {
  background-color: rgba(44, 44, 46, 0.6) !important;
}
.dark .bg-zinc-50 {
  background-color: var(--ios-bg) !important;
}
.dark .bg-zinc-100 {
  background-color: var(--ios-elev-2) !important;
}
.dark .bg-zinc-100\/60 {
  background-color: rgba(58, 58, 60, 0.6) !important;
}
.dark .border-zinc-200 {
  border-color: var(--ios-elev-1) !important;
}
.dark .text-zinc-900 {
  color: var(--ios-label) !important;
}
.dark .text-zinc-800 {
  color: var(--ios-label) !important;
}
.dark .text-zinc-700 {
  color: var(--ios-secondary-label) !important;
}
.dark .text-zinc-600 {
  color: var(--ios-secondary-label) !important;
}
.dark .text-zinc-500 {
  color: var(--ios-tertiary-label) !important;
}
.dark .text-zinc-400 {
  color: var(--ios-tertiary-label) !important;
}
.dark .text-black {
  color: var(--ios-label) !important;
}

/* Inform UA for form controls, scrollbars, etc. */
html {
  color-scheme: light;
}
html.dark {
  color-scheme: dark;
}

/* Admin: subtle, divider-free scrollbars on inner panes */
.admin-scroll {
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: rgba(113, 113, 122, 0.35) transparent; /* thumb, track */
}
.admin-scroll::-webkit-scrollbar {
  width: 8px;
}
.admin-scroll::-webkit-scrollbar-thumb {
  background-color: rgba(113, 113, 122, 0.35); /* zinc-500 @ ~35% */
  border-radius: 9999px;
  border: 2px solid transparent; /* avoid a visible divider line */
  background-clip: padding-box;
}
.admin-scroll:hover::-webkit-scrollbar-thumb {
  background-color: rgba(113, 113, 122, 0.5);
}
.admin-scroll::-webkit-scrollbar-track {
  background: transparent; /* no track divider */
}

/* ========================================
   Bento Grid Styles & Animations
   ======================================== */

/* Dotted background pattern for Bento pages */
.bento-background {
  background-image: radial-gradient(#e5e7eb 1px, transparent 1px);
  background-size: 24px 24px;
  background-color: #f3f4f6;
}

/* Base Bento card styles */
.bento-card {
  @apply rounded-3xl border border-slate-100 bg-white p-6;
  box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.05);
  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  transform: translateZ(0);
  will-change: transform;
}

.bento-card:hover {
  transform: translateY(-4px) scale(1.01) translateZ(0);
  box-shadow: 0 20px 50px -12px rgba(0, 0, 0, 0.1);
  z-index: 10;
}

/* Shimmer animation for GitHub contribution bars */
@keyframes shimmer {
  0% {
    opacity: 0.6;
    transform: scaleY(1);
  }
  50% {
    opacity: 1;
    transform: scaleY(1.1);
  }
  100% {
    opacity: 0.6;
    transform: scaleY(1);
  }
}

/* Infinite horizontal scroll animation for subscriptions */
@keyframes scroll-x {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.animate-scroll-x {
  animation: scroll-x 20s linear infinite;
}

/* Pulse ring animation for server status */
@keyframes pulse-ring {
  0% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  100% {
    transform: scale(2.4);
    opacity: 0;
  }
}

.animate-pulse-ring {
  animation: pulse-ring 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Hide scrollbar utility */
.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

.no-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome, Safari and Opera */
}

/* Loading state utility */
.loading {
  @apply pointer-events-none opacity-50;
}

/* Pulse dot with ring effect for server status */
.pulse-dot::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: inherit;
  border-radius: 50%;
  animation: pulse-ring 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
  z-index: -1;
}
